- name: Show yum packages to be installed
  ansible.builtin.import_tasks: debug.yml
  tags: debug_cpan_packages

- name: Show yum packages to be installed
  ansible.builtin.import_tasks: debug.yml
  tags: debug_yum_packages

- name: Show packages to be installed
  ansible.builtin.debug:
    msg: "{{ webservers_rpm_packages }}"
  tags: debug_yum_packages

- name: Show CPAN modules to be installed
  ansible.builtin.debug:
    msg: "{{ webservers_cpan_packages }}"
  tags: debug_cpan_packages

- name: Copy vhost file
  ansible.builtin.template:
    src: my_vhost.conf.j2
    dest: /etc/httpd/conf.d/my_vhost.conf
    owner: apache
    group: apache
    mode: "644"
  tags: copy_vhost_file
  notify: Restart httpd

- name: Copy service file to webserver
  ansible.builtin.copy:
    src: demo_service
    dest: /etc/systemd/system/demod.service
    owner: root
    group: root
    mode: "644"
  tags: copy_service_file

- name: Copy production.yml to webserver
  ansible.builtin.template:
    src: production.yml.j2
    dest: /var/www/demo/environments/production.yml
    owner: apache
    group: apache
    mode: "644"
  tags: copy_production_file
